'use strict';

const Aspect = require('mongodb/lib/operations/operation').Aspect;
const CoreCursor = require('mongodb/lib/core/cursor').CoreCursor;
const defineAspects = require('mongodb/lib/operations/operation').defineAspects;
const OperationBase = require('mongodb/lib/operations/operation').OperationBase;

class ExplainOperation extends OperationBase {
  constructor(cursor) {
    super();

    this.cursor = cursor;
  }

  execute() {
    const cursor = this.cursor;
    return CoreCursor.prototype._next.apply(cursor, arguments);
  }
}

defineAspects(ExplainOperation, Aspect.SKIP_SESSION);

module.exports = ExplainOperation;
